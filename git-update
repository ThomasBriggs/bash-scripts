#!/bin/bash

MESSAGE="git-update"

border() {
    title="| $@ |"
    edge=$(echo "$title" | sed 's/./-/g')
    echo "$edge"
    echo "$title"
    echo "$edge"
}

update () {
    if [ -e .git ]
    then
        border ${PWD##*/}
        printf %"$(tput cols)"s |tr " " "-"
        git add .
        git commit -m " $@ "
        git push
        printf %"$(tput cols)"s |tr " " "-"
    else
        echo "No .git file exists"
    fi
}

if [ $# == 0 ]
then  
    update "$MESSAGE"
else
    for i in $@ 
    do
        if [ -d $i ] 
        then
            cd $i
            update "$MESSAGE"
            cd ..
        fi
    done
fi